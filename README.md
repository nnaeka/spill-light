# Оптимизация размещения уличного освещения с минимизацией светового загрязнения

## Описание проекта

Этот проект представляет собой программный комплекс, разработанный для **оптимизации размещения уличных светильников** в коттеджных поселках. Основная цель – найти такую конфигурацию светильников, которая обеспечивает **полное покрытие дорожной сети** необходимым освещением при одновременной **минимизации светового загрязнения**.

Световое загрязнение в данной работе определяется как суммарная длина пересечения световых кругов от фонарей с контурами зданий. Программа использует геопространственные данные поселка (дороги и здания) для решения комплексной задачи оптимизации, предлагая сбалансированное решение как с экономической, так и с экологической точек зрения.

## Особенности и функционал

* **Загрузка и предобработка геоданных**: Работает с файлами формата GeoJSON (`.geojson`), выделяя дороги и здания.
* **Генерация точек-кандидатов**: Автоматическое создание потенциальных мест для установки фонарей вдоль дорог с заданным шагом.
* **Генерация точек спроса**: Создание точек на дорогах, которые должны быть гарантированно освещены.
* **Двухэтапная оптимизация**:
    1.  **Минимизация количества светильников**: Находит минимальное число фонарей, необходимых для полного покрытия всех точек спроса.
    2.  **Минимизация светового загрязнения**: Итеративно минимизирует общую длину засветки зданий, позволяя при этом небольшое увеличение количества фонарей для достижения лучшего результата по загрязнению.
* **Расчет светового загрязнения**: Для каждого потенциального фонаря рассчитывается длина пересечения его зоны освещения с контурами зданий.
* **Визуализация результатов**:
    * Интерактивные карты Folium для отображения исходных данных, точек-кандидатов, точек спроса и финального оптимального размещения светильников с их зонами действия и уровнем загрязнения.
    * График зависимости светового загрязнения от количества фонарей, демонстрирующий найденный компромисс.

## Методология

Проект использует подход, основанный на **целочисленном линейном программировании (ILP)**, реализованный в два последовательных этапа:

1.  **Задача покрытия**: На первом этапе формируется и решается задача ILP, где целевой функцией является минимизация общего количества установленных светильников. Ограничения включают требование полного покрытия каждой точки спроса.
2.  **Задача минимизации загрязнения**: На втором этапе, начиная с минимального количества фонарей, найденного на первом этапе, итеративно решается новая задача ILP. Здесь целевая функция – минимизация суммарного светового загрязнения. Ограничения включают сохранение полного покрытия и фиксированное количество светильников на текущей итерации. Процесс продолжается, пока загрязнение не перестанет улучшаться.

## Используемые технологии

Проект разработан на языке Python с использованием следующих библиотек:

* `geopandas`: Для работы с геопространственными данными.
* `shapely`: Для выполнения геометрических операций.
* `numpy`: Для численных расчетов и работы с массивами.
* `pulp`: Для моделирования и решения задач линейного и целочисленного программирования.
* `folium`: Для создания интерактивных карт.
* `matplotlib.pyplot`: Для построения графиков.

## Конфигурация параметров

В первой ячейке Jupyter Notebook вы можете настроить ключевые параметры:

* `LAMP_RADIUS`: Радиус освещения одного фонаря (в метрах).
* `CANDIDATE_STEP`: Шаг для расстановки потенциальных точек установки фонарей.
* `DEMAND_POINT_STEP`: Шаг для создания точек спроса.
* `MIN_EXTRA_CHECKS`: Количество дополнительных итераций для поиска лучшего решения по загрязнению.

